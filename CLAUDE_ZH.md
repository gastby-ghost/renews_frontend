# CLAUDE_ZH.md

本文件为 Claude Code (claude.ai/code) 在此仓库中工作时提供中文指导。

## 设计优先开发理念

⚠️ **重要提示**：构建新页面或功能时，**始终从设计开始**并**首先考虑现有组件**。本项目强调组件优先的方法，以确保一致性、可维护性和效率。

### 设计优先工作流程

1. **需求分析** - 理解需要构建什么
2. **组件研究** - 首先研究 `COMPONENT_LIBRARY.md` 中的现有组件
3. **基于组件的设计** - 在创建新组件之前，使用可用组件设计页面
4. **布局规划** - 使用现有布局组件构建页面结构
5. **组件组合** - 组合现有组件以创建新功能
6. **仅在必要时创建新组件** - 仅当现有组件无法满足需求时才构建新组件

### 组件优先原则

- **重用优于创建**：始终优先使用现有组件而不是创建新组件
- **组合优于定制**：组合现有组件而不是大量定制
- **一致性优于独特性**：在整个应用程序中保持设计一致性
- **效率优于新颖性**：使用经过验证的组件高效构建

## 核心开发命令

- `pnpm dev` - 启动开发服务器，支持热重载
- `pnpm build` - 构建生产版本
- `pnpm lint` - 运行 ESLint 进行代码质量检查
- `pnpm fix` - 运行 ESLint 自动修复
- `pnpm lint:prettier` - 使用 Prettier 格式化代码

## 项目目录结构

```
src/
├── components/             # 组件库（核心和自定义）
├── composables/            # 可重用的 Vue 3 组合函数
├── views/                  # 页面组件
├── router/                 # 路由配置
├── store/                  # Pinia 状态管理
├── utils/                  # 工具函数
├── types/                  # TypeScript 类型定义
├── assets/                 # 静态资源
└── locales/                # 国际化
```

## 技术栈

- **Vue 3** - 使用 Composition API 和 `<script setup>` 语法
- **TypeScript** - 类型安全
- **Vue Router 4** - 路由管理
- **Pinia** - 状态管理
- **Element Plus** - UI 组件库
- **SCSS** - 样式预处理

## 组件库

⚠️ **重要提示**：使用 UI 组件、构建新功能或修改现有组件功能时，**务必先阅读 `COMPONENT_LIBRARY.md`** 获取完整文档。

### 组件优先设计方法

**在开始任何页面开发之前，请遵循以下流程：**

1. **审查可用组件** - 研究 `COMPONENT_LIBRARY.md` 中的所有现有组件
2. **使用现有组件设计** - 使用可用组件规划页面布局
3. **检查组件功能** - 了解属性、插槽和自定义选项
4. **组合而非创建** - 组合现有组件以实现所需功能
5. **仅在绝对必要时创建新组件**

**何时创建新组件：**

- 没有现有组件提供所需功能
- 组件将在多个地方重复使用
- 组件代表现有组件未涵盖的独特 UI 模式

**何时不创建新组件：**

- 微小的样式差异可以通过属性或 CSS 覆盖实现
- 功能可以通过组合现有组件实现
- 组件只会使用一次

### 主要组件类别

1. **布局组件** - 应用结构和导航
2. **图表组件** - 高级 ECharts 数据可视化
3. **表单组件** - 增强的表单控件和验证
4. **表格组件** - 具有高级功能的数据表格
5. **卡片组件** - 数据显示和统计
6. **媒体组件** - 视频、图像和媒体处理

### 可用组合函数

- `useAuth.ts` - 认证逻辑
- `useTheme.ts` - 主题切换和管理
- `useChart.ts` - ECharts 配置
- `useCheckedColumns.ts` - 表格列可见性
- `useSystemInfo.ts` - 系统信息处理

## 页面开发指南

### 页面结构

- 在 `src/views/` 中创建页面，使用适当的子目录
- 使用 `<script setup>` 语法进行 Vue 3 Composition API 开发
- 从组件库导入组件（自动导入）
- 遵循 TypeScript 最佳实践，使用正确的类型

### 状态管理

- 使用 Pinia 存储需要持久化或共享的状态
- 核心存储：`user`、`setting`、`menu`、`worktab`、`table`
- 使用组合函数处理可重用逻辑

### 路由

- 页面基于文件结构自动路由
- 使用路由守卫进行认证和权限控制
- 实现适当的未知路由错误处理

### 样式

- 使用 SCSS 进行组件样式设计
- 遵循既定的主题系统
- 确保移动优先的响应式设计
- 使用 CSS 自定义属性进行主题化

### 关键指令

- `v-permission` - 基于角色的元素可见性
- `v-highlight` - 文本高亮效果
- `v-ripple` - Material Design 波纹效果

## 核心工具

### HTTP 请求

- 在 `src/utils/http/index.ts` 中集中管理 Axios 实例
- 自动令牌注入和错误处理
- 请求重试机制

### 存储

- 支持迁移的版本化本地存储
- 持久化用户偏好和设置

### 导航

- 标签管理工具
- 路由助手和导航函数

## 重要开发注意事项

- 所有组件自动导入 - 无需手动导入
- TypeScript 定义自动生成
- 遵循既定的代码模式和约定
- 始终测试亮色和暗色主题
- 确保所有页面的移动端响应性
- 对面向用户的文本使用国际化

## 文件同步要求

⚠️ **重要提醒**：每次更新 `CLAUDE.md` 文件时，**必须同步更新** `CLAUDE_ZH.md` 文件，确保两个文件的内容保持一致和最新。
